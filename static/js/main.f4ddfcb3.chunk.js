(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports=n(28)},20:function(e,t,n){},22:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),s=n(8),r=n.n(s),i=(n(20),n(13)),c=n(2),u=n(3),l=n(6),d=n(4),m=n(5),f=n(1),h=["KeyC","KeyS","Space","KeyR"];var p=[];n(22);var g=n(9),v=n(14),y=n(12),b=n.n(y),w={transition:"opacity ".concat(150,"ms ease-in"),opacity:0},j={entering:{opacity:1},entered:{opacity:1}},M=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={inProp:!1},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({inProp:!0})},10)}},{key:"render",value:function(){var e=this.props.message,t=this.state.inProp;return a.a.createElement("div",{className:"messagecontainer ".concat(e.from," ")},a.a.createElement(b.a,{in:t,timeout:150},function(t){return a.a.createElement("span",{style:Object(v.a)({},w,j[t]),className:"message ".concat(e.from," ")},e.body)}))}}]),t}(o.Component),k=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e)))._typeMessage=n._typeMessage.bind(Object(f.a)(Object(f.a)(n))),n._interval=null,n.state={message:e.message||null,inputText:""},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.state.message&&this._typeMessage()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this._interval&&(clearTimeout(this._interval),this._interval=null),this.setState({message:e.message,inputText:""},function(){e.message&&t._typeMessage()})}},{key:"_typeMessage",value:function(){var e=this,t=this.props.sendMessage,n=this.state,o=n.message,a=n.inputText;if(o.body!==a){var s="".concat(a).concat(o.body.charAt(a.length));this.setState({inputText:s},function(){e._interval=setTimeout(e._typeMessage,60*Math.random()+40)})}else o.complete&&setTimeout(function(){e.setState({message:null,inputText:""},function(){return t(o)})},150)}},{key:"render",value:function(){var e=this.state.inputText,t=e.length?a.a.createElement("span",{className:"blinker"}):null;return a.a.createElement("div",{className:"keyboard-input"},a.a.createElement("div",{className:"typed-input"},e,t))}}]),t}(o.Component),O=n(7),_=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e)))._handleInput=n._handleInput.bind(Object(f.a)(Object(f.a)(n))),n._advanceScript=n._advanceScript.bind(Object(f.a)(Object(f.a)(n))),n._sendMessage=n._sendMessage.bind(Object(f.a)(Object(f.a)(n))),n.state={messages:[],currentMessage:null,position:-1,show:!1},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;p.push(document.addEventListener("keydown",function(e,t){return function(n){e.includes(n.code)&&t(n.code)}}(t,e),{capture:!0}))}(this._handleInput)}},{key:"componentWillUnmount",value:function(){p.forEach(function(e){return document.removeEventListener("keydown",e)}),p.length=0}},{key:"_handleInput",value:function(e){switch(e){case"KeyC":return void O.audio.crash();case"KeyS":return this.setState({show:!0});case"KeyR":return this.setState({show:!1,currentMessage:null,position:-1,messages:[]});case"Space":return this._advanceScript();default:return}}},{key:"_advanceScript",value:function(){var e=this,t=this.state,n=t.show,o=t.position;if(n){var a=o+1;if(!(a>=g.length)){var s=g[a];this.setState({position:a},function(){return"me"===s.from?e.setState({currentMessage:s}):e._sendMessage(s)})}}}},{key:"_sendMessage",value:function(e){var t=this.state,n=t.messages,o=t.currentMessage,a={messages:Object(i.a)(n).concat([e])};e===o&&(a.currentMessage=null),"me"===e.from?O.audio.sendMessage():O.audio.receiveMessage(),this.setState(a)}},{key:"render",value:function(){var e=this.state,t=e.messages,n=e.currentMessage,o={opacity:e.show?1:0},s=t.map(function(e,t){return a.a.createElement(M,{key:t,message:e})});return a.a.createElement("div",{className:"container",style:o},a.a.createElement("div",{className:"header"},"Kate"),a.a.createElement("div",{className:"messagewindow"},a.a.createElement("div",{className:"messagelist"},s)),a.a.createElement(k,{message:n,sendMessage:this._sendMessage}))}}]),t}(o.Component),E=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function S(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(a.a.createElement(_,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/jh2017s4",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/jh2017s4","/service-worker.js");E?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):S(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):S(e)})}}()},7:function(e,t){var n=new AudioContext,o=new XMLHttpRequest;o.open("GET","./sound.wav",!0),o.responseType="arraybuffer";var a=!1,s=function(){return{start:function(){}}};o.onload=function(){n.decodeAudioData(o.response,function(e){s=function(){var t=n.createBufferSource();return t.buffer=e,t.connect(n.destination),t},a=!0},function(e){console.error("Audio error!",e)})},o.send();var r={sendMessage:function(){s().start(0,6.619,.562)},receiveMessage:function(){s().start(0,7.653,.643)},crash:function(){s().start(0,0,6.127)}};e.exports={loaded:a,audio:r}},9:function(e){e.exports=[{from:"her",body:"I can't believe I got paired with Mother Teresa.",complete:!0},{from:"her",body:"Now you'll be a good saint and do it all yourself, right?",complete:!0},{from:"me",body:"Ummm...no.",complete:!0},{from:"her",body:"Ummm...yes.",complete:!0},{from:"her",body:"One, I'll be too busy staring at Justin.",complete:!0},{from:"her",body:"Two, the more I do, the lower your grade.",complete:!0},{from:"me",body:"I wish I was paired with Tyler.",complete:!0},{from:"her",body:"No way!",complete:!0},{from:"her",body:"You two nerds would ruin the curve!",complete:!0},{from:"me",body:"We're going to meet in the lobby before the show, right?",complete:!0},{from:"her",body:"There's no way I'd be seen in that piece of junk car of yours.",complete:!0},{from:"her",body:"It's louder than a garbage truck and smells ten times worse!",complete:!0},{from:"me",body:"My dad's going to fix it.",complete:!0},{from:"her",body:"Just donate it to the demolition derby.",complete:!0},{from:"her",body:"They'll put it out of its misery.",complete:!0}]}},[[15,2,1]]]);
//# sourceMappingURL=main.f4ddfcb3.chunk.js.map